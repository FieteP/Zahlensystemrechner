<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Umrechner</title>
<style>
  body {
    font-family: sans-serif;
    background: black;
    color: white;
    margin: 0;
    padding: 0;
    text-align: center;
  }
  h1 {
    font-size: 1.6em;
    margin: 0.5em 0;
  }
  button {
    font-size: 1.4em;
    padding: 1em;
    margin: 0.5em 0;
    width: 90%;
    border-radius: 15px;
    border: none;
    background: #00aaff;
    color: white;
  }
  input {
    font-size: 1.4em;
    text-align: center;
    padding: 0.5em;
    margin: 0.5em 0;
    width: 80%;
    border-radius: 10px;
    border: 2px solid #00aaff;
    background: black;
    color: white;
  }
  .result {
    font-size: 1.2em;
    margin: 0.5em 0;
    word-wrap: break-word;
  }
</style>
</head>
<body>

<h1>Umrechner</h1>

<div id="start">
  <button id="btnDecimal">Dezimal</button>
  <button id="btnBinary">Binär</button>
  <button id="btnHex">Hex</button>
  <button id="btnAscii">ASCII</button>
</div>

<div id="converter" style="display:none;">
  <h2 id="modeLabel"></h2>
  <input id="inputField" placeholder="Eingabe">
  <button id="btnConvert">OK</button>
  <div class="result" id="res1"></div>
  <div class="result" id="res2"></div>
  <div class="result" id="res3"></div>
  <button id="btnBack">Zurück</button>
</div>

<script>
let mode = "decimal";

function chooseMode(m) {
  mode = m;
  document.getElementById("start").style.display = "none";
  document.getElementById("converter").style.display = "block";
  document.getElementById("modeLabel").innerText = 
    (m === "decimal" ? "Dezimal" : 
     m === "binary" ? "Binär" : 
     m === "hex" ? "Hex" : 
     "ASCII");
}

function formatBinary(binStr) {
  const padding = (4 - (binStr.length % 4)) % 4;
  const padded = "0".repeat(padding) + binStr;
  return padded.replace(/(.{4})(?=.)/g, "$1 ");
}

function setResult(id, text) {
  const el = document.getElementById(id);
  if (!text || text.trim() === "") {
    el.style.display = "none";
  } else {
    el.style.display = "block";
    el.innerText = text;
  }
}

function convert() {
  const input = document.getElementById("inputField").value.trim();
  let number;
  try {
    if (mode === "decimal") {
      number = parseInt(input, 10);
      if (isNaN(number)) throw "err";
      setResult("res1", "Bin: " + formatBinary(number.toString(2)));
      setResult("res2", "Hex: " + number.toString(16).toUpperCase());
      let ascii = String.fromCharCode(number);
      setResult("res3", ascii.match(/[\x20-\x7E]/) ? "ASCII: " + ascii : "");
    } 
    else if (mode === "binary") {
      number = parseInt(input, 2);
      if (isNaN(number)) throw "err";
      setResult("res1", "Dec: " + number);
      setResult("res2", "Hex: " + number.toString(16).toUpperCase());
      let ascii = String.fromCharCode(number);
      setResult("res3", ascii.match(/[\x20-\x7E]/) ? "ASCII: " + ascii : "");
    } 
    else if (mode === "hex") {
      number = parseInt(input, 16);
      if (isNaN(number)) throw "err";
      setResult("res1", "Dec: " + number);
      setResult("res2", "Bin: " + formatBinary(number.toString(2)));
      let ascii = String.fromCharCode(number);
      setResult("res3", ascii.match(/[\x20-\x7E]/) ? "ASCII: " + ascii : "");
    } 
    else if (mode === "ascii") {
      let chars = input.split("");
      let decArr = chars.map(c => c.charCodeAt(0));
      let binArr = decArr.map(d => formatBinary(d.toString(2)));
      let hexArr = decArr.map(d => d.toString(16).toUpperCase());

      setResult("res1", "Dec: " + decArr.join(" "));
      setResult("res2", "Bin: " + binArr.join(" | "));
      setResult("res3", "Hex: " + hexArr.join(" "));
    }
  } catch (e) {
    setResult("res1", "❌ Fehler");
    setResult("res2", "");
    setResult("res3", "");
  }
}

function goBack() {
  document.getElementById("converter").style.display = "none";
  document.getElementById("start").style.display = "block";
  document.getElementById("inputField").value = "";
  setResult("res1", "");
  setResult("res2", "");
  setResult("res3", "");
}

// Events
document.getElementById("btnDecimal").addEventListener("click", () => chooseMode("decimal"));
document.getElementById("btnBinary").addEventListener("click", () => chooseMode("binary"));
document.getElementById("btnHex").addEventListener("click", () => chooseMode("hex"));
document.getElementById("btnAscii").addEventListener("click", () => chooseMode("ascii"));
document.getElementById("btnConvert").addEventListener("click", convert);
document.getElementById("btnBack").addEventListener("click", goBack);
</script>

</body>
</html>
